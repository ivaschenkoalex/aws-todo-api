version: 0.2
phases:
  install:
    commands:
      - python -V
      - pip install -r requirements.txt || true
      - pip install -r requirements-dev.txt
  build:
    commands:
      - ruff .                   # lint
      - black --check . || true  # format check (warn but don't fail; remove '|| true' to enforce)
      - python -m py_compile lambda_function.py
      - pytest -q
      - mkdir -p package && cp lambda_function.py package/ && cd package && zip -r ../function.zip . && cd ..
artifacts:
  files:
    - function.zip

